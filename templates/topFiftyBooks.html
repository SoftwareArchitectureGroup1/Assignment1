{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container">
    <h1>Top 50 Best Seller Books</h1>
    <table class="table mt-4">
        <thead>
            <tr>
                <th>Position</th>
                <th>Name</th>
                <th>Publication Year</th>
                <th>Total Sales</th>
                <th>Author Total Sales</th>
                <th>Top 5 on Publication</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ book.name }}</td>
                <td>{{ book.date_of_publication|slice:"0:4" }}</td>
                <td>{{ book.number_of_sales }}</td>
                {% for key,value in total_sales.items %}
                    {% if key == book.id%}
                        <td>{{ value.total_sales }}</td>
                    {% endif %}
                {% endfor %}
                {% for key,value in topSales.items %}
                    {% if key == book.id%}
                        <td>{{ value.bestseller }}</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
    {% csrf_token %}


{% endblock %}

{% block js_script %}
    <script src="{% static 'scripts/deleteauthor.js' %}"></script>
{% endblock %}